<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Add PUSMENDIK TKA Data</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }
      .container {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .header {
        text-align: center;
        margin-bottom: 30px;
      }
      .schedule-card {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 20px;
        margin: 15px 0;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .badge {
        display: inline-block;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: bold;
        margin: 5px 5px 5px 0;
      }
      .badge-gelombang {
        background: #3b82f6;
        color: white;
      }
      .badge-hari {
        background: #8b5cf6;
        color: white;
      }
      .badge-type {
        background: #10b981;
        color: white;
      }
      .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 15px 0;
      }
      .info-item {
        background: rgba(255, 255, 255, 0.05);
        padding: 10px;
        border-radius: 8px;
      }
      .btn {
        background: #10b981;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        margin: 10px 5px;
        transition: all 0.3s;
      }
      .btn:hover {
        background: #059669;
        transform: translateY(-2px);
      }
      .btn-secondary {
        background: #6b7280;
      }
      .btn-secondary:hover {
        background: #4b5563;
      }
      .status {
        padding: 10px;
        border-radius: 8px;
        margin: 10px 0;
        font-weight: bold;
      }
      .status.success {
        background: #10b981;
        color: white;
      }
      .status.error {
        background: #ef4444;
        color: white;
      }
      .status.info {
        background: #3b82f6;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üå± Add PUSMENDIK TKA Data</h1>
        <p>Menambahkan data jadwal TKA sesuai jadwal PUSMENDIK resmi 2025</p>
      </div>

      <div class="schedule-card">
        <h3>üìÖ Jadwal TKA yang akan ditambahkan:</h3>

        <div class="schedule-card">
          <h4>Gelombang 1 - Hari Pertama</h4>
          <div class="badge badge-gelombang">Gelombang 1</div>
          <div class="badge badge-hari">Hari Pertama</div>
          <div class="badge badge-type">Reguler</div>
          <div class="info-grid">
            <div class="info-item">
              <strong>üìÖ Tanggal:</strong><br />
              3 November 2025
            </div>
            <div class="info-item">
              <strong>‚è∞ Waktu:</strong><br />
              07:30 - 16:30
            </div>
            <div class="info-item">
              <strong>üè¢ Tempat:</strong><br />
              SMK Negeri 1 Jakarta
            </div>
            <div class="info-item">
              <strong>üè† Ruangan:</strong><br />
              Lab Komputer 1-3
            </div>
          </div>
        </div>

        <div class="schedule-card">
          <h4>Gelombang 2 - Hari Kedua</h4>
          <div class="badge badge-gelombang">Gelombang 2</div>
          <div class="badge badge-hari">Hari Kedua</div>
          <div class="badge badge-type">Reguler</div>
          <div class="info-grid">
            <div class="info-item">
              <strong>üìÖ Tanggal:</strong><br />
              5-6 November 2025
            </div>
            <div class="info-item">
              <strong>‚è∞ Waktu:</strong><br />
              07:30 - 15:40
            </div>
            <div class="info-item">
              <strong>üè¢ Tempat:</strong><br />
              SMK Negeri 1 Jakarta
            </div>
            <div class="info-item">
              <strong>üè† Ruangan:</strong><br />
              Lab Komputer 1-3
            </div>
          </div>
        </div>

        <div class="schedule-card">
          <h4>TKA Susulan</h4>
          <div class="badge badge-gelombang">Gelombang 1</div>
          <div class="badge badge-hari">Hari Pertama</div>
          <div class="badge badge-type">Susulan</div>
          <div class="info-grid">
            <div class="info-item">
              <strong>üìÖ Tanggal:</strong><br />
              17-20 November 2025
            </div>
            <div class="info-item">
              <strong>‚è∞ Waktu:</strong><br />
              07:30 - 15:40
            </div>
            <div class="info-item">
              <strong>üè¢ Tempat:</strong><br />
              SMK Negeri 1 Jakarta
            </div>
            <div class="info-item">
              <strong>üè† Ruangan:</strong><br />
              Lab Komputer 1
            </div>
          </div>
        </div>
      </div>

      <div style="text-align: center; margin: 30px 0">
        <button class="btn" onclick="addTkaData()">
          üå± Tambahkan Data TKA
        </button>
        <button class="btn btn-secondary" onclick="checkExistingData()">
          üìä Cek Data Existing
        </button>
      </div>

      <div id="status"></div>
    </div>

    <script>
      const API_BASE_URL = "http://localhost:8000/api";

      async function addTkaData() {
        const statusDiv = document.getElementById("status");
        statusDiv.innerHTML =
          '<div class="status info">üîÑ Menambahkan data TKA...</div>';

        const tkaData = [
          {
            title: "Tes Kemampuan Akademik (TKA) 2025 - Gelombang 1",
            description:
              "Tes Kemampuan Akademik untuk jenjang SMK sesuai jadwal PUSMENDIK 2025.",
            start_date: "2025-11-03 07:30:00",
            end_date: "2025-11-04 16:30:00",
            status: "scheduled",
            type: "regular",
            instructions:
              "Pelaksanaan TKA Gelombang 1 sesuai jadwal PUSMENDIK 2025. Hari Pertama: 3 November, Hari Kedua: 4 November.",
            target_schools: null,
            is_active: true,
            created_by: "Super Admin",
            // PUSMENDIK Essential Fields
            gelombang: "1",
            hari_pelaksanaan: "Hari Pertama",
            exam_venue: "SMK Negeri 1 Jakarta",
            exam_room: "Lab Komputer 1-3",
            contact_person: "Dr. Sari Indah, M.Pd",
            contact_phone: "021-3844294",
            requirements:
              "Siswa kelas 12 SMK, membawa KTP/Kartu Pelajar, alat tulis",
            materials_needed: "Pensil 2B, Penghapus, Rautan, KTP/Kartu Pelajar",
          },
          {
            title: "Tes Kemampuan Akademik (TKA) 2025 - Gelombang 2",
            description:
              "Tes Kemampuan Akademik untuk jenjang SMK sesuai jadwal PUSMENDIK 2025.",
            start_date: "2025-11-05 07:30:00",
            end_date: "2025-11-06 15:40:00",
            status: "scheduled",
            type: "regular",
            instructions:
              "Pelaksanaan TKA Gelombang 2 sesuai jadwal PUSMENDIK 2025. Hari Pertama: 5 November, Hari Kedua: 6 November.",
            target_schools: null,
            is_active: true,
            created_by: "Super Admin",
            // PUSMENDIK Essential Fields
            gelombang: "2",
            hari_pelaksanaan: "Hari Kedua",
            exam_venue: "SMK Negeri 1 Jakarta",
            exam_room: "Lab Komputer 1-3",
            contact_person: "Dr. Sari Indah, M.Pd",
            contact_phone: "021-3844294",
            requirements:
              "Siswa kelas 12 SMK, membawa KTP/Kartu Pelajar, alat tulis",
            materials_needed: "Pensil 2B, Penghapus, Rautan, KTP/Kartu Pelajar",
          },
          {
            title: "Tes Kemampuan Akademik (TKA) Susulan 2025",
            description:
              "Tes Kemampuan Akademik susulan untuk siswa yang berhalangan hadir pada jadwal reguler.",
            start_date: "2025-11-17 07:30:00",
            end_date: "2025-11-20 15:40:00",
            status: "scheduled",
            type: "makeup",
            instructions:
              "Pelaksanaan TKA Susulan sesuai jadwal PUSMENDIK 2025. Hanya untuk siswa dengan surat keterangan berhalangan.",
            target_schools: null,
            is_active: true,
            created_by: "Super Admin",
            // PUSMENDIK Essential Fields
            gelombang: "1",
            hari_pelaksanaan: "Hari Pertama",
            exam_venue: "SMK Negeri 1 Jakarta",
            exam_room: "Lab Komputer 1",
            contact_person: "Dr. Sari Indah, M.Pd",
            contact_phone: "021-3844294",
            requirements:
              "Siswa kelas 12 SMK dengan surat keterangan berhalangan, membawa KTP/Kartu Pelajar, alat tulis",
            materials_needed:
              "Pensil 2B, Penghapus, Rautan, KTP/Kartu Pelajar, Surat Keterangan Berhalangan",
          },
        ];

        try {
          for (let i = 0; i < tkaData.length; i++) {
            const schedule = tkaData[i];
            statusDiv.innerHTML = `<div class="status info">üîÑ Menambahkan: ${schedule.title}...</div>`;

            const response = await fetch(`${API_BASE_URL}/tka-schedules`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json",
              },
              body: JSON.stringify(schedule),
            });

            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }

            const result = await response.json();
            console.log(`‚úÖ Added: ${schedule.title}`, result);
          }

          statusDiv.innerHTML =
            '<div class="status success">‚úÖ Semua data TKA berhasil ditambahkan!</div>';
        } catch (error) {
          console.error("‚ùå Error adding TKA data:", error);
          statusDiv.innerHTML = `<div class="status error">‚ùå Error: ${error.message}</div>`;
        }
      }

      async function checkExistingData() {
        const statusDiv = document.getElementById("status");
        statusDiv.innerHTML =
          '<div class="status info">üîÑ Mengecek data existing...</div>';

        try {
          const response = await fetch(`${API_BASE_URL}/tka-schedules`, {
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
            },
          });

          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const data = await response.json();
          console.log("üìä Existing TKA data:", data);

          if (data.success && data.data && data.data.length > 0) {
            let html =
              '<div class="status success">üìä Data TKA yang ada:</div>';
            data.data.forEach((schedule, index) => {
              html += `
                            <div class="schedule-card">
                                <h4>${index + 1}. ${schedule.title}</h4>
                                <div class="badge badge-gelombang">Gelombang ${
                                  schedule.gelombang || "N/A"
                                }</div>
                                <div class="badge badge-hari">${
                                  schedule.hari_pelaksanaan || "N/A"
                                }</div>
                                <div class="badge badge-type">${
                                  schedule.type
                                }</div>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <strong>üìÖ Tanggal:</strong><br>
                                        ${new Date(
                                          schedule.start_date
                                        ).toLocaleDateString("id-ID")}
                                    </div>
                                    <div class="info-item">
                                        <strong>üè¢ Tempat:</strong><br>
                                        ${schedule.exam_venue || "N/A"}
                                    </div>
                                </div>
                            </div>
                        `;
            });
            statusDiv.innerHTML = html;
          } else {
            statusDiv.innerHTML =
              '<div class="status info">üìä Belum ada data TKA</div>';
          }
        } catch (error) {
          console.error("‚ùå Error checking data:", error);
          statusDiv.innerHTML = `<div class="status error">‚ùå Error: ${error.message}</div>`;
        }
      }

      // Auto check existing data on load
      window.onload = function () {
        checkExistingData();
      };
    </script>
  </body>
</html>
